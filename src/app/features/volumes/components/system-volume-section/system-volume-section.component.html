<div class="bg-zinc-900 border border-zinc-800 rounded-xl overflow-hidden mb-4">
  <!-- Header -->
  <button
    type="button"
    (click)="toggleExpanded()"
    class="w-full px-4 py-3 pb-4 flex items-center justify-between hover:bg-zinc-800/50 transition-colors"
  >
    <div class="flex items-center gap-3">
      <lucide-icon
        [img]="expanded() ? ChevronDown : ChevronRight"
        class="w-5 h-5 text-zinc-400"
      ></lucide-icon>

      <div class="text-left">
        <h2 class="font-semibold text-white">{{ system().name }}</h2>
        <div class="flex items-center gap-2 text-xs text-zinc-400">
          <span class="px-1.5 py-0.5 rounded bg-zinc-700">{{ runtimeIcon() }}</span>
          <lucide-icon [img]="Globe" class="w-3 h-3"></lucide-icon>
          <span>{{ system().hostname }}</span>
        </div>
      </div>
    </div>

    <div class="flex items-center gap-4 text-sm">
      <div class="text-right">
        <span class="text-zinc-300 font-medium">{{ volumeCount() }}</span>
        <span class="text-zinc-500 ml-1">Volumes</span>
      </div>
      <div class="text-right">
        <span class="text-zinc-300 font-medium">{{ containerCount() }}</span>
        <span class="text-zinc-500 ml-1">Containers</span>
      </div>
    </div>
  </button>

  <!-- Content -->
  @if (expanded()) {
    <div class="px-4 pb-4">
      @if (volumes().length > 0) {
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
          @for (volume of volumes(); track volume.name) {
            <app-volume-card
              [volume]="volume"
              [containers]="getContainersForVolume(volume)"
              [isOrphaned]="isVolumeOrphaned(volume)"
              [isDeleting]="isVolumeDeleting(volume)"
              (deleted)="onVolumeDeleted(volume)"
            />
          }
        </div>
      } @else {
        <div class="text-center py-8 text-zinc-500">
          <lucide-icon [img]="HardDrive" class="w-8 h-8 mx-auto mb-2 opacity-50"></lucide-icon>
          <p class="text-sm">No volumes found on this system</p>
        </div>
      }
    </div>
  }
</div>
